{"version":3,"sources":["scripts.js"],"names":["baseEndpoint","proxy","form","document","querySelector","recipesEl","ingredientEl","querySelectorAll","fetchRecipes","query","ing","ingString","join","res","fetch","data","json","console","log","handleSubmit","event","preventDefault","el","currentTarget","fetchAndDisplay","value","submit","disabled","forEach","checkbox","checked","push","name","recipes","displayRecipes","results","html","map","recipe","title","ingredients","thumbnail","href","innerHTML","addEventListener"],"mappings":"AAAA,MAAMA,YAAY,GAAG,gCAArB;AACA,MAAMC,KAAK,GAAG,sCAAd;AACA,MAAMC,IAAI,GAAGC,QAAQ,CAACC,aAAT,CAAuB,aAAvB,CAAb;AACA,MAAMC,SAAS,GAAGF,QAAQ,CAACC,aAAT,CAAuB,UAAvB,CAAlB;AACA,MAAME,YAAY,GAAGH,QAAQ,CAACI,gBAAT,CAA0B,mBAA1B,CAArB;;AAEA,eAAeC,YAAf,CAA4BC,KAA5B,EAAmCC,GAAnC,EAAwC;AACpC;AACA,QAAMC,SAAS,GAAGD,GAAG,CAACE,IAAJ,CAAS,GAAT,CAAlB;AACA,QAAMC,GAAG,GAAG,MAAMC,KAAK,CAAE,GAAEb,KAAM,GAAED,YAAa,MAAKS,KAAM,MAAKE,SAAU,EAAnD,CAAvB;AACA,QAAMI,IAAI,GAAG,MAAMF,GAAG,CAACG,IAAJ,EAAnB;AACAC,EAAAA,OAAO,CAACC,GAAR,CAAYH,IAAZ;AACA,SAAOA,IAAP;AACH;;AAED,eAAeI,YAAf,CAA4BC,KAA5B,EAAmC;AAC/BA,EAAAA,KAAK,CAACC,cAAN;AACA,QAAMC,EAAE,GAAGF,KAAK,CAACG,aAAjB;AACAC,EAAAA,eAAe,CAACF,EAAE,CAACb,KAAH,CAASgB,KAAV,CAAf;AACH;;AAED,eAAeD,eAAf,CAA+Bf,KAA/B,EAAsC;AAClC;AACAP,EAAAA,IAAI,CAACwB,MAAL,CAAYC,QAAZ,GAAuB,IAAvB,CAFkC,CAGlC;;AACA,MAAIjB,GAAG,GAAG,EAAV;AACAJ,EAAAA,YAAY,CAACsB,OAAb,CAAqBC,QAAQ,IAAI;AAC7B,QAAIA,QAAQ,CAACC,OAAb,EAAsB;AAClBpB,MAAAA,GAAG,CAACqB,IAAJ,CAASF,QAAQ,CAACG,IAAlB;AACH;AACJ,GAJD,EALkC,CAUlC;;AACA,QAAMC,OAAO,GAAG,MAAMzB,YAAY,CAACC,KAAD,EAAQC,GAAR,CAAlC,CAXkC,CAYlC;;AACAR,EAAAA,IAAI,CAACwB,MAAL,CAAYC,QAAZ,GAAuB,KAAvB;AACAV,EAAAA,OAAO,CAACC,GAAR,CAAYe,OAAZ;AACAC,EAAAA,cAAc,CAACD,OAAO,CAACE,OAAT,CAAd;AACH;;AAGD,SAASD,cAAT,CAAwBD,OAAxB,EAAiC;AAC7BhB,EAAAA,OAAO,CAACC,GAAR,CAAY,eAAZ;AACA,QAAMkB,IAAI,GAAGH,OAAO,CAACI,GAAR,CAAYC,MAAM,IAAI;AACvB,WAAQ;;sBAEFA,MAAM,CAACC,KAAM;qBACdD,MAAM,CAACE,WAAY;kBACtBF,MAAM,CAACG,SAAP,IACG,aAAYH,MAAM,CAACG,SAAU;2BACvBH,MAAM,CAACC,KAAM,KAAK;2BAClBD,MAAM,CAACI,IAAK;;SAPvB;AAUX,GAXY,CAAb;AAYIrC,EAAAA,SAAS,CAACsC,SAAV,GAAsBP,IAAI,CAACxB,IAAL,CAAU,EAAV,CAAtB;AACP;;AACGV,IAAI,CAAC0C,gBAAL,CAAsB,QAAtB,EAAgCzB,YAAhC;AACAK,eAAe,CAAC,OAAD,CAAf","file":"scripts.b71a6038.js","sourceRoot":"..","sourcesContent":["const baseEndpoint = \"http://www.recipepuppy.com/api\";\r\nconst proxy = 'https://cors-anywhere.herokuapp.com/';\r\nconst form = document.querySelector('form.search');\r\nconst recipesEl = document.querySelector('.recipes')\r\nconst ingredientEl = document.querySelectorAll('[type=\"checkbox\"]');\r\n\r\nasync function fetchRecipes(query, ing) {\r\n    // ingredient will be an array ['salt', 'oil',.....]\r\n    const ingString = ing.join(',')\r\n    const res = await fetch(`${proxy}${baseEndpoint}?q=${query}&i=${ingString}`);\r\n    const data = await res.json();\r\n    console.log(data);\r\n    return data;\r\n}\r\n\r\nasync function handleSubmit(event) {\r\n    event.preventDefault();\r\n    const el = event.currentTarget;\r\n    fetchAndDisplay(el.query.value);\r\n}\r\n\r\nasync function fetchAndDisplay(query) {\r\n    // turn the form off\r\n    form.submit.disabled = true;\r\n    //handle checkbox here\r\n    let ing = [];\r\n    ingredientEl.forEach(checkbox => {\r\n        if (checkbox.checked) {\r\n            ing.push(checkbox.name);\r\n        }\r\n    });\r\n    // submit the search\r\n    const recipes = await fetchRecipes(query, ing);\r\n    // turn the form off\r\n    form.submit.disabled = false;\r\n    console.log(recipes);\r\n    displayRecipes(recipes.results);\r\n}\r\n\r\n\r\nfunction displayRecipes(recipes) {\r\n    console.log('creating html');\r\n    const html = recipes.map(recipe => {\r\n                return `\r\n            <div>\r\n                <h2>${recipe.title}</h2>\r\n                <p>${recipe.ingredients}</p>\r\n                ${recipe.thumbnail && \r\n                    `<img src=\"${recipe.thumbnail}\"\r\n                    alt=\"${recipe.title}\"/>`}\r\n                <a href=\"${recipe.href}\">View Recipe -></a>\r\n            </div>\r\n        `;\r\n    });\r\n        recipesEl.innerHTML = html.join('');\r\n}\r\n    form.addEventListener('submit', handleSubmit);\r\n    fetchAndDisplay('pizza');"]}